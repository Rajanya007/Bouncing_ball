<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">

    <title>Hello, world!</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.2/jquery.validate.min.js"></script>
    <script>
        var login = localStorage.getItem("login")
        if (login == "false") {
            window.location.href = "form-validated.html";
        }


    </script>



    <style>
        .col-sm-4 {
            padding: 13px;
            overflow: hidden;
        }

        .category:hover {
            background-color: #01b888 !important;
            cursor: pointer;
        }

        hr {
            margin: 0;
            margin-bottom: 1px;
        }

        .scroll::-webkit-scrollbar {
            width: 0.5em;
        }

        .scroll::-webkit-scrollbar-track {
            box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
        }

        .scroll::-webkit-scrollbar-thumb {
            background-color: rgb(1, 184, 136);
            border-radius: 5px;
        }

        b {
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 1;
            -webkit-box-orient: vertical;
            margin: 15px;
        }

        img {
            float: left;
        }

        #loading {
            display: none;
            background: url('http://iptvbillingsolution.com/loveyword/channel/wp-content/plugins/MyPlugin/img/loading-unscreen.gif') no-repeat center center;
            height: 100%;
            width: 100%;
        }
    </style>
</head>


<body>

    <div style="margin: auto auto;">
        <button id="logout" style="margin: 22px 22px 0px 22px;">
            Logout
        </button>
        <div class="col-sm-12">
            <div class="row" style="width: 100%">
                <div class="col-sm-1">

                </div>
                <div class="col-sm-10" style="background-color: #0e2a36; color: white;     border-radius: 10px;
                box-shadow: 0px 0px 4px 2px #a69e9e;">
                    <div class="row" style="padding: 10px;">
                        <div class="col-sm-1">
                            <label for="live1"><input type="radio" id="live1" name="selection" class="live"
                                    checked>Live</label>

                        </div>
                        <div class="col-sm-1">
                            <label for="movies"><input type="radio" id="movies" name="selection"
                                    class="movies">Movies</label>
                        </div>
                        <div class="col-sm-1">
                            <label for="streams"><input type="radio" id="streams" name="selection"
                                    class="streams">Streams</label>
                        </div>
                        <div class="col-sm-7">

                        </div>
                        <div class="col-sm-2">
                            <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                        </div>
                    </div>
                    <hr>
                    <div class="row" style="padding: 15px;">

                        <div class="col-sm-3 scroll" id="div1"
                            style=" height: 500px; overflow-y: scroll; text-align: center; ">

                        </div>
                        <div class="col-sm-9 scroll" id="ssc" style="height: 500px; overflow-y: scroll;background-color: #cfd4be;
                        color: #0e2a36;">
                            <div id="loading"></div>
                            <div class="row" id="div3">

                            </div>

                        </div>



                    </div>
                </div>
                <div class="col-sm-1">

                </div>
            </div>
        </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
        crossorigin="anonymous"></script>
    <script>
        var ll;
        var mm;
        var ss;
        var category_id;
        var username = localStorage.getItem('username');
        var pass = localStorage.getItem('pass');
        var url = localStorage.getItem('url');
        function categoryid(ganna) {
            $("#loading").show();
            $(".category").css("background-color", "#0e2a36")
            $(ganna).css("background-color", "#01b888");



            //    alert($(ganna).attr("id"));
            $("#div3").empty();
            if (ll == false && mm == true && ss == false) {
                $("#loading").show();

                $.ajax({
                    type: "POST",
                    url: url + '/player_api.php',
                    data: 'username=' + username + '&password=' + pass + '&action=get_vod_streams&category_id=' + $(ganna).attr("id"),
                    // localStorage.setItem("result",data);

                    success: function (data) {
                        $("#loading").hide();
                        // console.log(data)
                        for (var k = 0; k < data.length; k++) {
                            $("#div3").append("<div class='col-sm-4'>" + "<img src='" + data[k].stream_icon + "' onerror='myFunction(this)' style='width: 20%;'>" + "<b>" + data[k].name + "</b>" + "</div>")
                        }

                    }

                });
            }
            else if (ll == true && mm == false && ss == false) {

                $.ajax({
                    type: "POST",
                    url: url + '/player_api.php',
                    data: 'username=' + username + '&password=' + pass + '&action=get_live_streams&category_id=' + $(ganna).attr("id"),

                    success: function (data) {
                        console.log(data)
                        $("#loading").hide();

                        for (var k = 0; k < data.length; k++) {
                            $("#div3").append("<div class='col-sm-4' >" + "<img src='" + data[k].stream_icon + "' onerror='myFunction(this)' style='width: 20%;'>" + "<b>" + data[k].name + "</b>" + "</div>")
                        }

                    }

                });
            }
            else if (ll == false && mm == false && ss == true) {

                $.ajax({
                    type: "POST",
                    url: url + '/player_api.php',
                    data: 'username=' + username + '&password=' + pass + '&action=get_series&category_id=' + $(ganna).attr("id"),
                    // localStorage.setItem("result",data);

                    success: function (data) {
                        console.log(data)
                        $("#loading").hide();

                        for (var k = 0; k < data.length; k++) {
                            $("#div3").append("<div class='col-sm-4'>" + "<img src='" + data[k].cover + "' onerror='myFunction(this)' style='width: 20%;'>" + "<b>" + data[k].name + "</b>" + "</div>")
                        }

                    }

                });
            }



        }
        function myFunction(prabhC) {
            $(prabhC).attr("src", "https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/No_image_available.svg/600px-No_image_available.svg.png")
        }




        $(document).ready(function () {
            $(".me-2").on("keyup", function () {
                var value = $(this).val().toLowerCase();
                $(".col-sm-4").filter(function () {
                    $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                });
            });

            var isChecked = $("#live1").is(':checked');

            $("#logout").click(function () {
                window.location.href = "form-validated.html"
                localStorage.setItem("login", "false")
                return false
            });
            if (isChecked == true) {

                $.ajax({
                    type: "POST",
                    url: url + '/player_api.php',
                    data: 'username=' + username + '&password=' + pass + '&action=get_live_categories',

                    success: function (data) {
                        ll = true;
                        mm = false;
                        ss = false;

                        for (var j = 0; j < data.length; j++) {

                            $('#div1').append('<div id="' + data[j].category_id + '" class="category" onclick="categoryid(this)">' +
                                data[j].category_name + '</div>' + '<hr class="hr">');
                        }
                        for (var j = 0; j < 1; j++) {
                            $("#" + data[j].category_id).css("background-color", "#01b888");
                            var category_id = data[j].category_id;
                            $.ajax({
                                type: "POST",
                                url: url + '/player_api.php',
                                data: 'username=' + username + '&password=' + pass + '&action=get_live_streams&category_id=' + category_id,

                                success: function (data) {
                                    console.log(data)

                                    for (var k = 0; k < data.length; k++) {
                                        if (data[k].stream_icon == "") {
                                            data[k].stream_icon = "https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/No_image_available.svg/600px-No_image_available.svg.png";
                                        };
                                        $("#div3").append("<div class='col-sm-4'>" + "<img src='" + data[k].stream_icon + "' onerror='myFunction(this)' style='width: 20%;'>" + "<b>" + data[k].name + "</b>" + "</div>")
                                    }

                                }

                            });

                        }
                    }

                });

            }
            $(".live").click(function () {
                $("#div1").empty()
                $("#div3").empty();


                $.ajax({
                    type: "POST",
                    url: url + '/player_api.php',
                    data: 'username=' + username + '&password=' + pass + '&action=get_live_categories',

                    success: function (data) {
                        ll = true;
                        mm = false;
                        ss = false;

                        for (var j = 0; j < data.length; j++) {
                            $('#div1').append('<div id="' + data[j].category_id + '" class="category" onclick="categoryid(this)">' +
                                data[j].category_name + '</div>' + '<hr class="hr">');
                        }

                        for (var j = 0; j < 1; j++) {
                            $("#" + data[j].category_id).css("background-color", "#01b888");
                            var category_id = data[j].category_id;
                            $.ajax({
                                type: "POST",
                                url: url + '/player_api.php',
                                data: 'username=' + username + '&password=' + pass + '&action=get_live_streams&category_id=' + category_id,

                                success: function (data) {
                                    console.log(data)

                                    for (var k = 0; k < data.length; k++) {
                                        if (data[k].stream_icon == "") {
                                            data[k].stream_icon = "https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/No_image_available.svg/600px-No_image_available.svg.png";
                                        };
                                        $("#div3").append("<div class='col-sm-4'>" + "<img src='" + data[k].stream_icon + "' onerror='myFunction(this)' style='width: 20%;'>" + "<b>" + data[k].name + "</b>" + "</div>")
                                    }

                                }

                            });

                        }

                    }

                });


            });

            $(".movies").click(function () {
                $("#div1").empty()
                $("#div3").empty();

                $.ajax({
                    type: "POST",
                    url: url + '/player_api.php',
                    data: 'username=' + username + '&password=' + pass + '&action=get_vod_categories',

                    success: function (data) {
                        ll = false;
                        mm = true;
                        ss = false;

                        for (var j = 0; j < data.length; j++) {
                            $('#div1').append('<div id="' + data[j].category_id + '"class="category" onclick="categoryid(this)">' + data[j].category_name + '</div>' + '<hr class="hr">');
                        }
                        for (var j = 0; j < 1; j++) {
                            $("#" + data[j].category_id).css("background-color", "#01b888");
                            var category_id = data[j].category_id;
                            $.ajax({
                                type: "POST",
                                url: url + '/player_api.php',
                                data: 'username=' + username + '&password=' + pass + '&action=get_vod_streams&category_id=' + category_id,

                                success: function (data) {
                                    console.log(data)

                                    for (var k = 0; k < data.length; k++) {
                                        if (data[k].stream_icon == "") {
                                            data[k].stream_icon = "https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/No_image_available.svg/600px-No_image_available.svg.png";
                                        };
                                        $("#div3").append("<div class='col-sm-4'>" + "<img src='" + data[k].stream_icon + "' onerror='myFunction(this)' style='width: 20%;'>" + "<b>" + data[k].name + "</b>" + "</div>")
                                    }

                                }

                            });

                        }

                    }

                });

            });
            $(".streams").click(function () {

                $("#div1").empty()
                $("#div3").empty();

                $.ajax({
                    type: "POST",
                    url: url + '/player_api.php',
                    data: 'username=' + username + '&password=' + pass + '&action=get_series_categories',

                    success: function (data) {
                        ll = false;
                        mm = false;
                        ss = true;
                        console.log(data)

                        for (var j = 0; j < data.length; j++) {
                            $('#div1').append('<div id="' + data[j].category_id + '"class="category" onclick="categoryid(this)">' +
                                data[j].category_name + '</div>' + '<hr class="hr">');
                        }
                        for (var j = 0; j < 1; j++) {
                            $("#" + data[j].category_id).css("background-color", "#01b888");
                            var category_id = data[j].category_id;
                            $.ajax({
                                type: "POST",
                                url: url + '/player_api.php',
                                data: 'username=' + username + '&password=' + pass + '&action=get_series&category_id=' + category_id,

                                success: function (data) {
                                    console.log(data)

                                    for (var k = 0; k < data.length; k++) {
                                        if (data[k].stream_icon == "") {
                                            data[k].stream_icon = "https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/No_image_available.svg/600px-No_image_available.svg.png";
                                        };
                                        $("#div3").append("<div class='col-sm-4'>" + "<img src='" + data[k].cover + "' onerror='myFunction(this)' style='width: 20%;'>" + "<b>" + data[k].name + "</b>" + "</div>")
                                    }

                                }

                            });

                        }

                    }

                });


            });




        });

    </script>
</body>

</html>